## YAML Template.
---
databaseChangeLog:
  - changeSet:
        id: 1
        author: courtib
        changes:
            - createTable:
                tableName: kyt_user
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: application_role
                        type: int
                        constraints:
                            nullable: false
                    - column:
                        name: email
                        type: varchar(255)
                        constraints:
                            nullable: false
                    - column:
                        name: password
                        type: varchar(255)
                        constraints:
                            nullable: false
                    - column:
                        name: username
                        type: varchar(255)
                        constraints:
                            nullable: false
            - createTable:
                tableName: kyt_project
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: name
                        type: varchar(255)
                        constraints:
                            nullable: false      
            - createTable:
                tableName: kyt_state
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: name
                        type: varchar(255)
                        constraints:
                            nullable: false    
                    - column:
                        name: close_state
                        type: boolean
                    - column:
                        name: kanban_hide
                        type: boolean
                    - column:
                        name: position
                        type: int
                        constraints:
                            nullable: false
                    - column:
                        name: project_id
                        type: BIGINT
                        constraints:
                            nullable: false
                                                
            - createTable:
                tableName: kyt_swimlane
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: name
                        type: varchar(255)
                        constraints:
                            nullable: false 
                    - column:
                        name: position
                        type: int
                        constraints:
                            nullable: false 
                    - column:
                        name: project_id
                        type: BIGINT
                        constraints:
                            nullable: false                             
                    - column:
                        name: end_planned
                        type: DATE
            - createTable:
                tableName: kyt_category
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: name
                        type: varchar(255)
                        constraints:
                            nullable: false 
                    - column:
                        name: bgcolor
                        type: varchar(255)
                    - column:
                        name: color
                        type: varchar(255) 
                    - column:
                        name: project_id
                        type: BIGINT
                        constraints:
                            nullable: false                               
            - createTable:
                tableName: kyt_member
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: project_role
                        type: int
                        constraints:
                            nullable: false
                    - column:
                        name: project_id
                        type: BIGINT
                        constraints:
                            nullable: false
                    - column:
                        name: user_id
                        type: BIGINT
                        constraints:
                            nullable: false                            
            - createTable:
                tableName: kyt_task
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: name
                        type: varchar(255)
                        constraints:
                            nullable: false  
                    - column:
                        name: created
                        type: DATETIME
                        constraints:
                            nullable: false  
                    - column:
                        name: description
                        type: varchar(10000)
                    - column:
                        name: estimated_load
                        type: FLOAT
                    - column:
                        name: last_modified
                        type: DATETIME
                    - column:
                        name: planned_ending
                        type: DATE
                    - column:
                        name: planned_start
                        type: DATE
                    - column:
                        name: assignee
                        type: BIGINT
                    - column:
                        name: category_id
                        type: BIGINT
                    - column:
                        name: project_id
                        type: BIGINT
                        constraints:
                            nullable: false   
                    - column:
                        name: state_id
                        type: BIGINT
                        constraints:
                            nullable: false  
                    - column:
                        name: swimlane_id
                        type: BIGINT
            - createTable:
                tableName: kyt_task_comment
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: comment
                        type: varchar(10000)
                        constraints:
                            nullable: false  
                    - column:
                        name: writer
                        type: varchar(255)
                        constraints:
                            nullable: false
                    - column:
                        name: writing_date
                        type: DATETIME
                        constraints:
                            nullable: false  
                    - column:
                        name: parent_id
                        type: BIGINT      
                    - column:
                        name: task_id
                        type: BIGINT
                        constraints:
                            nullable: false  
            - createTable:
                tableName: kyt_allocation
                columns:
                    - column:
                        name: id
                        type: BIGINT
                        constraints:
                            primaryKey: true
                            nullable: false
                    - column:
                        name: allocation_date
                        type: DATE
                        constraints:
                            nullable: false                              
                    - column:
                        name: time_remains
                        type: FLOAT
                    - column:
                        name: time_spent
                        type: FLOAT
                        constraints:
                            nullable: false
                    - column:
                        name: member_id
                        type: BIGINT
                        constraints:
                            nullable: false
                    - column:
                        name: task_id
                        type: BIGINT
                        constraints:
                            nullable: false  
  - changeSet:   
        id: 2
        author: courtib
        changes:
            insert :
                tableName : kyt_user
                columns:
                - column:
                    name: id
                    valueNumeric: 1
                - column:
                    name: username
                    value: admin
                - column:
                    name: password
                    value: $2a$10$v.Vkaz5PddwFwDMsIOhiwOGeAHuGqZVDhaycH.e9v1iygr6LcDppu    
                - column:
                    name: application_role
                    valueNumeric: 0    
                - column:
                    name: email
                    value: admin@localhost.fr  