<header class="heading" ng-if="projectCtrl.hasEditRights">
    <h2 class="heading__title pull-left">Projet : {{projectCtrl.project.name}}</h2>
    <div class="heading__action pull-right">
        <button class="btn btn-info btn-sm" ng-click="kanbanCtrl.add()"><span class="glyphicon glyphicon-plus-sign"></span> Nouvelle t√¢che</button>
    </div>
</header>

<div class="panel">
    <table class="table kanban__table">
        <thead>
            <tr>
                <th>&nbsp;</th>
                <th ng-repeat="task in kanbanCtrl.tasksByState" class="kanban__column--title" style="width : {{86 / kanbanCtrl.tasksByState.length}}%" id="column{{task.id}}">
                    {{task.name}}
                    <span class="badge alert-info">{{task.taskCount}}</span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="swimlane in kanbanCtrl.swimlanes">
                <td class="kanban__column kanban__column--title column">{{swimlane.name}}</td>
                <td class="kanban__column column" ng-repeat="taskState in kanbanCtrl.tasksByState">
                    <ul class="list-unstyled" as-sortable="kanbanCtrl.kanbanSortOptions" data-rowindex="{{swimlane.id}}" data-columnindex="{{taskState.id}}" ng-model="kanbanCtrl.tasks[taskState.position][swimlane.position]">
                        <li ng-repeat="task in kanbanCtrl.tasksByState[taskState.position][swimlane.position]" as-sortable-item>
                            <div ng-include="'/templates/projects/tasks/kanban-card.html'" as-sortable-item-handle></div>
                        </li>

                    </ul>
                </td>
            </tr>
            <tr>
                <td class="kanban__column kanban__column--title column"></td>
                <td class="kanban__column column" ng-repeat="taskState in kanbanCtrl.tasksByState">
                    <ul class="list-unstyled" as-sortable="kanbanCtrl.kanbanSortOptions" data-rowindex="" data-columnindex="{{taskState.id}}" ng-model="kanbanCtrl.tasksByState[taskState.id]">
                        <li ng-repeat="task in taskState.tasks" as-sortable-item>
                            <div ng-include="'/templates/projects/tasks/kanban-card.html'" as-sortable-item-handle></div>
                        </li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
</div>